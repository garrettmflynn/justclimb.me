var re=Object.defineProperty;var oe=(r,e,n)=>e in r?re(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var A=(r,e,n)=>(oe(r,typeof e!="symbol"?e+"":e,n),n),F=(r,e,n)=>{if(!e.has(r))throw TypeError("Cannot "+n)};var i=(r,e,n)=>(F(r,e,"read from private field"),n?n.call(r):e.get(r)),p=(r,e,n)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,n)},m=(r,e,n,s)=>(F(r,e,"write to private field"),s?s.call(r,n):e.set(r,n),n);import"https://cdn.plot.ly/plotly-2.20.0.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const w=[],D=[];function ie(r,e){e.add(r),r.dependencies.add(e)}function ce(r){for(const e of r.dependencies)e.delete(r);r.dependencies.clear()}function _(r,e){const n=t=>{ce(s),w.push(s);try{r(t)}finally{w.pop()}};e||(e=r.name);const s={name:e,execute:n,dependencies:new Set};return n(),!0}function G(r,e={}){const n=new Set,s=new Set,t=e.name,o=()=>{const a=w[w.length-1];return a&&(!n.has(a)&&e.onSubscriptionAdded&&e.onSubscriptionAdded(a.name),ie(a,n)),r},c=(...a)=>{if(t){const l=D[w.length-1];l&&l!==t&&!s.has(l)&&(s.add(l),e.onDependencyAdded&&e.onDependencyAdded(l));const u=w[w.length-1];u&&t!==u.name&&!n.has(u)&&e.onDependencyAdded&&e.onDependencyAdded(u.name)}D.push(t),Array.from(n).forEach(l=>{l.execute(...a)}),D.pop()};return{get:o,set:a=>(c(r=a),r),run:c,subscriptions:n}}function ae(r,e={}){const n=G(void 0,e),s=(...t)=>n.set(r(...t));return _(s,e.name),e.operators?{...n,run:s}:n.get}function le(r){return typeof r=="function"?"/Function("+r.toString()+")/":r}const K=r=>{if(typeof r=="string"&&r.startsWith("/Function(")&&r.endsWith(")/")){let e=r.substring(10,r.length-2);return e[0]!=="("&&e.slice(0,8)!=="function"&&e.slice(0,5)!=="class"&&(e=`function ${e}`),(0,eval)("("+e+")")}return r},de=r=>JSON.parse(r,(e,n)=>K(n));function ue(r){var n;return typeof r=="function"?r.prototype?(n=Object.getOwnPropertyDescriptor(r,"prototype"))!=null&&n.writable?"function":"class":r.constructor.name==="AsyncFunction"?"async":"arrow":""}const N={},R=["Object","Array","Map","Set"];function U(r){var n;var e=[];if(r)do{const s=(n=r.constructor)==null?void 0:n.name,t=R.includes(s);R.includes(s)&&(N[s]||(N[s]=[...Object.getOwnPropertyNames(globalThis[s].prototype)])),Object.getOwnPropertyNames(r).forEach(function(o){o!=="constructor"&&(t&&N[s].includes(o)||e.indexOf(o)===-1&&e.push(o))})}while(r=Object.getPrototypeOf(r));return e}var S,E,f,y,x,b,P,C,v;const $=class{constructor(e={}){p(this,S,void 0);p(this,E,void 0);p(this,f,void 0);p(this,y,void 0);p(this,x,void 0);p(this,b,void 0);p(this,P,void 0);p(this,C,void 0);p(this,v,void 0);m(this,S,{}),m(this,E,{}),m(this,f,{}),m(this,y,{}),this.nodes={},this.ignore=[],this.onSubscriptionAdded=()=>{},m(this,x,(s,t)=>{let o=s,c=t;if(i(this,f).base&&(o=`${i(this,f).base}.${s}`,c=`${i(this,f).base}.${t}`),i(this,S)[s]||(i(this,S)[s]=new Set),i(this,S)[s].add(t),i(this,b).call(this,s)){for(const d in i(this,S))i(this,S)[d].has(s)&&i(this,x).call(this,d,t);return}i(this,b).call(this,t)||(i(this,E)[s]||(i(this,E)[s]=new Set),i(this,E)[s].has(t)||(i(this,E)[s].add(t),this.onSubscriptionAdded(o,c)))}),this.export=({json:s=!1}={})=>{const t={};for(const o in this.nodes)i(this,y)[o]instanceof $?t[o]=i(this,y)[o].export({json:s}):t[o]=typeof i(this,y)[o]=="function"?i(this,y)[o]:this.nodes[o],s&&(t[o]=le(t[o]));return t},m(this,b,s=>s[0]==="$"),m(this,P,(s,t)=>{const o=typeof s=="string",c=o?s:t,d=o?t:s,a={...i(this,f),base:i(this,f).base?`${i(this,f).base}.${c}`:c},l=new $(a);i(this,y)[c]=l,l.load(d);const u={};for(const h in l.nodes)i(this,v).call(this,h,{get:()=>l.nodes[h],set:j=>l.nodes[h]=j},u);return o&&i(this,v).call(this,c,{get:()=>u}),u}),this.toJSON=()=>this.export({json:!0}),m(this,C,(s,t)=>ae((...o)=>s.call(this.nodes,...o),{operators:!0,name:t,onDependencyAdded:o=>i(this,x).call(this,o,t)})),m(this,v,(s,t,o=this.nodes)=>(Object.defineProperty(o,s,{...t,enumerable:!0,configurable:!1}),t)),m(this,f,{...e}),Object.keys(i(this,f)).forEach(s=>{Object.defineProperty(this,s,{get:()=>i(this,f)[s],set:t=>i(this,f)[s]=t})})}get subscriptions(){const e=Object.entries(i(this,y)).filter(([s,t])=>t instanceof $),n={...i(this,E)};return e.forEach(([s,t])=>n[s]=t.subscriptions),n}add(e,n){if(!this.ignore.includes(n)){if(typeof e=="object")return this.load(e);{const s=e;i(this,y)[s]=n;let t={};const o=ue(n);if(o==="class"){const c=n,d=(...a)=>i(this,P).call(this,new c(...a),s);t.get=()=>d}else if(o){let c;const d=u=>c=i(this,C).call(this,u,s);d(n);const a=()=>c.get(),l=(...u)=>{const h=u.length;return h===1&&u[0]===void 0?a():h?c.run(...u):a()};t.get=()=>l,t.set=d}else{const c=G(n,{onSubscriptionAdded:d=>i(this,x).call(this,s,d)});t.get=()=>c.get(),t.set=c.set}return i(this,b).call(this,s)||(i(this,E)[s]=new Set),i(this,v).call(this,s,t)}}}load(e={}){const n=typeof e=="string"?de(e):e;return U(n).sort((t,o)=>i(this,b).call(this,t)&&!i(this,b).call(this,o)?1:!i(this,b).call(this,t)&&i(this,b).call(this,o)?-1:0).forEach(t=>{const o=n[t];o&&typeof o=="object"&&!Array.isArray(o)?i(this,P).call(this,t,o):this.add(t,K(o))}),!0}};let V=$;S=new WeakMap,E=new WeakMap,f=new WeakMap,y=new WeakMap,x=new WeakMap,b=new WeakMap,P=new WeakMap,C=new WeakMap,v=new WeakMap;var g,L;class O extends HTMLElement{constructor(n={}){super();p(this,g,void 0);p(this,L,void 0);m(this,L,!1),this.initialize=()=>{if(i(this,L))return;U(this).forEach(t=>{if(t==="constructor"||t==="connectedCallback"||t in HTMLElement.prototype)return;t in i(this,g).nodes?i(this,g).nodes[t]=this[t]:i(this,g).add(t,this[t])});for(let t in i(this,g).nodes)Object.defineProperty(this,t,{get:()=>i(this,g).nodes[t],set:o=>i(this,g).nodes[t]=o});m(this,L,!0)},n instanceof V?m(this,g,n):(m(this,g,new V({ignore:[this.initialize]})),i(this,g).load(n))}connectedCallback(){this.initialize();let n=this.render()??[];Array.isArray(n)||(n=[n]),n.forEach(s=>{s=s.bind(this);let t;_(()=>{const o=s();o!==t&&(t?t.replaceWith(o):this.append(o),t=o)})})}render(){return[]}}g=new WeakMap,L=new WeakMap;customElements.define("commonwealth-element",O);var k;class q extends O{constructor(n){super(n);p(this,k,document.createElement("section"));A(this,"body",()=>i(this,k))}nav(){const n=document.createElement("nav"),s=document.createElement("h2");s.innerText=this.header;const o=new URLSearchParams(window.location.search).get("page"),c=document.createElement("div"),d=this.pages.map(({label:a,element:l},u)=>{const h=document.createElement("a");h.style.marginLeft="15px",h.href="javascript:undefined",h.innerText=a;const j=a.toLowerCase();return h.onclick=()=>{const H=this.body(),M=H.children[0];M?M.replaceWith(l):H.append(l),window.history.pushState({},"",`?page=${j}`)},u===0&&(s.onclick=h.onclick),j===o&&h.click(),h});return o||d[0].click(),c.append(...d),n.append(s,c),n}render(){return[this.nav,this.body]}}k=new WeakMap;let he="page-component";customElements.define(he,q);class Y extends O{constructor(e){super(e),this.initialize()}onClick(e){return this.grade}button(){const e=document.createElement("button");return e.textContent=this.grade,e.addEventListener("click",()=>this.onClick(!0)),e}render(){return[this.button]}}let me="button-component";customElements.define(me,Y);const Q=r=>{const e=document.createElement("li"),n=document.createElement("small");n.innerText=r.timestamp;const s=document.createElement("b");return s.innerText=r.value,e.append(s,n),e.style.cursor="delete",e},T=r=>{if(!r)return[];let e=localStorage.getItem(r)||[];return Array.isArray(e)?e:JSON.parse(e)},B=(r,e)=>{localStorage.setItem(r,JSON.stringify(e))},z=()=>new Date().toISOString().split("T")[0],J=()=>T(z());class X extends O{constructor(n){super(n);A(this,"get",T);A(this,"latest",[]);this.latest=J()}add(n,s){if(n&&s){let t=T(n);t.push({value:s,timestamp:new Date().toLocaleTimeString("en-US")}),B(n,t),this.list(!0)}}addToday(n){this.add(z(),n)}list(n){const s=document.createElement("ul"),t=this.latest=J();return s.innerHTML="",t.forEach((o,c)=>{const d=Q(o),a=document.createElement("button");a.innerHTML="Delete",a.style.marginLeft="10px",a.onclick=()=>{t.splice(c,1),B(z(),t),this.list(!0)},d.appendChild(a),s.appendChild(d)}),s}render(){return[this.list]}}let pe="climb-history";customElements.define(pe,X);const Z=r=>r.map(s=>parseInt(s.value.slice(1))).reduce((s,t)=>s+t+1,0),ee="7",W=()=>localStorage.getItem("gradeRange")||ee,fe=r=>localStorage.setItem("gradeRange",r);class te extends O{constructor(e){super(e),fe(W())}range(){let e=document.createElement("div");e.classList.add("slider");const n=document.createElement("small"),s=document.createElement("input");return s.type="range",s.min="0",s.max="17",s.oninput=()=>{n.innerHTML=s.value,localStorage.setItem("gradeRange",s.value)},s.onchange=()=>window.location.reload(),n.innerHTML=s.value=W(),e.append(s,n),e}clear(){const e=document.createElement("button");return e.innerText="Clear All History (MAKE SURE YOU WANT THIS)",e.onclick=()=>{localStorage.clear(),window.location.reload()},e}render(){return[this.clear,this.range]}}let ge="settings-page";customElements.define(ge,te);var I;class ne extends O{constructor(n){super(n);p(this,I,new X);A(this,"history",()=>i(this,I));A(this,"buttons",()=>{let n=localStorage.getItem("gradeRange")||ee;const s=document.createElement("div");s.classList.add("grades");const o=Array.from({length:parseInt(n)+1},(l,u)=>`V${u}`).map(l=>{const u=new Y({grade:l});return u.classList.add("grade"),u}),c=new V;let d=!1;const a=this.history();return o.forEach(l=>{c.add(`${l.grade}Clicked`,()=>{const u=l.onClick();d&&a.addToday(u)})}),d=!0,s.append(...o),s});i(this,I).initialize()}score(){const n=document.createElement("h3");n.style.fontSize="100px",n.style.margin="0",n.style.marginBottom="20px",n.style.textAlign="center";const s=this.history(),t=Z(s.latest);return n.innerText=`${t}`,n}render(){return[this.score,this.buttons,this.history]}}I=new WeakMap;let ye="score-page";customElements.define(ye,ne);const be="hsl(322, 80%, 60%)",Ee="hsl(322, 0%, 94%)",Se="hsl(322, 0%, 94%)",we="hsl(60, 80%, 60%)",xe="hsl(60, 80%, 60%)",ve="hsl(237, 80%, 60%)",Oe="hsl(237, 80%, 60%)",Ae="hsl(114, 80%, 60%)",Te="hsl(114, 80%, 60%)",Pe="hsl(0, 80%, 60%)",Le="hsl(17, 80%, 60%)",$e="hsl(0, 0%, 40%)",Ve="hsl(0, 0%, 35%)",Ce="hsl(0, 0%, 30%)",Ie="hsl(0, 0%, 25%)",je="hsl(0, 0%, 20%)",ke="hsl(0, 0%, 15%)",De="hsl(0, 0%, 10%)",Ne=Object.freeze(Object.defineProperty({__proto__:null,V0:be,V1:Ee,V10:Le,V11:$e,V12:Ve,V13:Ce,V14:Ie,V15:je,V16:ke,V17:De,V2:Se,V3:we,V4:xe,V5:ve,V6:Oe,V7:Ae,V8:Te,V9:Pe},Symbol.toStringTag,{value:"Module"}));class se extends O{constructor(e){super(e)}dates(){return Array.from({length:localStorage.length},(e,n)=>localStorage.key(n)).filter(e=>(e==null?void 0:e.split("-").length)===3).sort((e,n)=>new Date(n)-new Date(e))}getSplit(e=!1){const n=e?[...this.dates()].reverse():this.dates(),s=n.map(c=>T(c));let t=[],o=s.map((c,d)=>{const a={};return c.forEach(l=>{t.includes(l.value)||t.push(l.value),l.value in a?a[l.value]++:a[l.value]=1}),a},{});return{dates:n,grades:t,split:o}}score(){const e=[...this.dates()].reverse(),n=e.map(l=>T(l)),s=n.map(Z),t=n.map(l=>l.reduce((u,h)=>u+parseInt(h.value.slice(1)),0)/l.length),o={x:e,y:s,name:"Total Score",mode:"lines",line:{color:"black",width:2}},c={x:e,y:t,name:"Average Difficulty",yaxis:"y2",mode:"lines",line:{color:"darkgray",width:1}};var d={type:"scatter",mode:"lines",title:"Score Overview",xaxis:{type:"category"},yaxis:{rangemode:"tozero"},yaxis2:{overlaying:"y",side:"right",rangemode:"tozero"}};const a=document.createElement("div");return setTimeout(()=>Plotly.newPlot(a,[o,c],d,{responsive:!0}),10),a}grades(){const{grades:e,split:n,dates:s}=this.getSplit(!0),t=e.sort((d,a)=>parseInt(d.slice(1))-parseInt(a.slice(1))).map(d=>({x:s,y:n.map(a=>a[d]||0),name:d,marker:{color:Ne[d]},type:"bar"}));var o={barmode:"stack",title:"Grade Breakdown",xaxis:{type:"category"},yaxis:{title:"# of Climbs"}};const c=document.createElement("div");return setTimeout(()=>Plotly.newPlot(c,t,o,{responsive:!0}),10),c}list(){const e=this.dates(),n=document.createElement("div");return n.append(...e.map(s=>{const t=T(s),o=document.createElement("div"),c=document.createElement("h3");c.style.marginBottom="0px",c.innerText=s;const d=document.createElement("small"),a=t.reduce((u,h)=>u+parseInt(h.value.slice(1)),0)/t.length;d.innerText=`${t.length} climbs @ V${a.toFixed(1)}`;const l=document.createElement("ul");return t.forEach(u=>{const h=Q(u);l.append(h)}),o.append(c,d,l),o})),n}render(){return[this.score,this.grades,this.list]}}let ze="history-page";customElements.define(ze,se);const He=new ne,Me=new te,Fe=new se,Re=new q({header:"JustClimb",pages:[{label:"Score",element:He},{label:"History",element:Fe},{label:"Settings",element:Me}]});document.body.append(Re);
