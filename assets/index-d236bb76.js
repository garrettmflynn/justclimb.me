var se=Object.defineProperty;var re=(r,n,s)=>n in r?se(r,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[n]=s;var T=(r,n,s)=>(re(r,typeof n!="symbol"?n+"":n,s),s),k=(r,n,s)=>{if(!n.has(r))throw TypeError("Cannot "+s)};var i=(r,n,s)=>(k(r,n,"read from private field"),s?s.call(r):n.get(r)),m=(r,n,s)=>{if(n.has(r))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(r):n.set(r,s)},f=(r,n,s,e)=>(k(r,n,"write to private field"),e?e.call(r,s):n.set(r,s),s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const w=[],H=[];function oe(r,n){n.add(r),r.dependencies.add(n)}function ie(r){for(const n of r.dependencies)n.delete(r);r.dependencies.clear()}function U(r,n){const s=t=>{ie(e),w.push(e);try{r(t)}finally{w.pop()}};n||(n=r.name);const e={name:n,execute:s,dependencies:new Set};return s(),!0}function G(r,n={}){const s=new Set,e=new Set,t=n.name,o=()=>{const a=w[w.length-1];return a&&(!s.has(a)&&n.onSubscriptionAdded&&n.onSubscriptionAdded(a.name),oe(a,s)),r},c=(...a)=>{if(t){const l=H[w.length-1];l&&l!==t&&!e.has(l)&&(e.add(l),n.onDependencyAdded&&n.onDependencyAdded(l));const d=w[w.length-1];d&&t!==d.name&&!s.has(d)&&n.onDependencyAdded&&n.onDependencyAdded(d.name)}H.push(t),Array.from(s).forEach(l=>{l.execute(...a)}),H.pop()};return{get:o,set:a=>(c(r=a),r),run:c,subscriptions:s}}function ce(r,n={}){const s=G(void 0,n),e=(...t)=>s.set(r(...t));return U(e,n.name),n.operators?{...s,run:e}:s.get}function ae(r){return typeof r=="function"?"/Function("+r.toString()+")/":r}const V=r=>{if(typeof r=="string"&&r.startsWith("/Function(")&&r.endsWith(")/")){let n=r.substring(10,r.length-2);return n[0]!=="("&&n.slice(0,8)!=="function"&&n.slice(0,5)!=="class"&&(n=`function ${n}`),(0,eval)("("+n+")")}return r},le=r=>JSON.parse(r,(n,s)=>V(s));function de(r){var s;return typeof r=="function"?r.prototype?(s=Object.getOwnPropertyDescriptor(r,"prototype"))!=null&&s.writable?"function":"class":r.constructor.name==="AsyncFunction"?"async":"arrow":""}const F={},J=["Object","Array","Map","Set"];function q(r){var s;var n=[];if(r)do{const e=(s=r.constructor)==null?void 0:s.name,t=J.includes(e);J.includes(e)&&(F[e]||(F[e]=[...Object.getOwnPropertyNames(globalThis[e].prototype)])),Object.getOwnPropertyNames(r).forEach(function(o){o!=="constructor"&&(t&&F[e].includes(o)||n.indexOf(o)===-1&&n.push(o))})}while(r=Object.getPrototypeOf(r));return n}var S,E,p,y,x,b,P,C,O;const $=class{constructor(n={}){m(this,S,void 0);m(this,E,void 0);m(this,p,void 0);m(this,y,void 0);m(this,x,void 0);m(this,b,void 0);m(this,P,void 0);m(this,C,void 0);m(this,O,void 0);f(this,S,{}),f(this,E,{}),f(this,p,{}),f(this,y,{}),this.nodes={},this.ignore=[],this.onSubscriptionAdded=()=>{},f(this,x,(e,t)=>{let o=e,c=t;if(i(this,p).base&&(o=`${i(this,p).base}.${e}`,c=`${i(this,p).base}.${t}`),i(this,S)[e]||(i(this,S)[e]=new Set),i(this,S)[e].add(t),i(this,b).call(this,e)){for(const u in i(this,S))i(this,S)[u].has(e)&&i(this,x).call(this,u,t);return}i(this,b).call(this,t)||(i(this,E)[e]||(i(this,E)[e]=new Set),i(this,E)[e].has(t)||(i(this,E)[e].add(t),this.onSubscriptionAdded(o,c)))}),this.export=({json:e=!1}={})=>{const t={};for(const o in this.nodes)i(this,y)[o]instanceof $?t[o]=i(this,y)[o].export({json:e}):t[o]=typeof i(this,y)[o]=="function"?i(this,y)[o]:this.nodes[o],e&&(t[o]=ae(t[o]));return t},f(this,b,e=>e[0]==="$"),f(this,P,(e,t)=>{const o=typeof e=="string",c=o?e:t,u=o?t:e,a={...i(this,p),base:i(this,p).base?`${i(this,p).base}.${c}`:c},l=new $(a);i(this,y)[c]=l,l.load(u);const d={};for(const h in l.nodes)i(this,O).call(this,h,{get:()=>l.nodes[h],set:j=>l.nodes[h]=j},d);return o&&i(this,O).call(this,c,{get:()=>d}),d}),this.toJSON=()=>this.export({json:!0}),f(this,C,(e,t)=>ce((...o)=>e.call(this.nodes,...o),{operators:!0,name:t,onDependencyAdded:o=>i(this,x).call(this,o,t)})),f(this,O,(e,t,o=this.nodes)=>(Object.defineProperty(o,e,{...t,enumerable:!0,configurable:!1}),t)),f(this,p,{...n}),Object.keys(i(this,p)).forEach(e=>{Object.defineProperty(this,e,{get:()=>i(this,p)[e],set:t=>i(this,p)[e]=t})})}get subscriptions(){const n=Object.entries(i(this,y)).filter(([e,t])=>t instanceof $),s={...i(this,E)};return n.forEach(([e,t])=>s[e]=t.subscriptions),s}add(n,s){if(!this.ignore.includes(s)){if(typeof n=="object")return this.load(n);{const e=n;i(this,y)[e]=s;let t={};const o=de(s);if(o==="class"){const c=s,u=(...a)=>i(this,P).call(this,new c(...a),e);t.get=()=>u}else if(o){let c;const u=d=>c=i(this,C).call(this,d,e);u(s);const a=()=>c.get(),l=(...d)=>{const h=d.length;return h===1&&d[0]===void 0?a():h?c.run(...d):a()};t.get=()=>l,t.set=u}else{const c=G(s,{onSubscriptionAdded:u=>i(this,x).call(this,e,u)});t.get=()=>c.get(),t.set=c.set}return i(this,b).call(this,e)||(i(this,E)[e]=new Set),i(this,O).call(this,e,t)}}}load(n={}){const s=typeof n=="string"?le(n):n;return q(s).sort((t,o)=>i(this,b).call(this,t)&&!i(this,b).call(this,o)?1:!i(this,b).call(this,t)&&i(this,b).call(this,o)?-1:0).forEach(t=>{const o=s[t];o&&typeof o=="object"&&!Array.isArray(o)?i(this,P).call(this,t,o):this.add(t,V(o))}),!0}};let v=$;S=new WeakMap,E=new WeakMap,p=new WeakMap,y=new WeakMap,x=new WeakMap,b=new WeakMap,P=new WeakMap,C=new WeakMap,O=new WeakMap;var g,L;class A extends HTMLElement{constructor(s={}){super();m(this,g,void 0);m(this,L,void 0);f(this,L,!1),this.initialize=()=>{if(i(this,L))return;q(this).forEach(t=>{if(t==="constructor"||t==="connectedCallback"||t in HTMLElement.prototype)return;t in i(this,g).nodes?i(this,g).nodes[t]=this[t]:i(this,g).add(t,this[t])});for(let t in i(this,g).nodes)Object.defineProperty(this,t,{get:()=>i(this,g).nodes[t],set:o=>i(this,g).nodes[t]=o});f(this,L,!0)},s instanceof v?f(this,g,s):(f(this,g,new v({ignore:[this.initialize]})),i(this,g).load(s))}connectedCallback(){this.initialize();let s=this.render()??[];Array.isArray(s)||(s=[s]),s.forEach(e=>{e=e.bind(this);let t;U(()=>{const o=e();o!==t&&(t?t.replaceWith(o):this.append(o),t=o)})})}render(){return[]}}g=new WeakMap,L=new WeakMap;customElements.define("commonwealth-element",A);var D;class Y extends A{constructor(s){super(s);m(this,D,document.createElement("section"));T(this,"body",()=>i(this,D))}nav(){const s=document.createElement("nav"),e=document.createElement("h2");e.innerText=this.header;const o=new URLSearchParams(window.location.search).get("page"),c=document.createElement("div"),u=this.pages.map(({label:a,element:l},d)=>{const h=document.createElement("a");h.style.marginLeft="15px",h.href="javascript:undefined",h.innerText=a;const j=a.toLowerCase();return h.onclick=()=>{const z=this.body(),R=z.children[0];R?R.replaceWith(l):z.append(l),window.history.pushState({},"",`?page=${j}`)},d===0&&(e.onclick=h.onclick),j===o&&h.click(),h});return o||u[0].click(),c.append(...u),s.append(e,c),s}render(){return[this.nav,this.body]}}D=new WeakMap;let ue="page-component";customElements.define(ue,Y);class _ extends A{constructor(n){super(n),this.initialize()}onClick(n){return this.grade}button(){const n=document.createElement("button");return n.textContent=this.grade,n.addEventListener("click",()=>this.onClick(!0)),n}render(){return[this.button]}}let he="button-component";customElements.define(he,_);const Q=r=>{const n=document.createElement("li"),s=document.createElement("small");s.innerText=r.timestamp;const e=document.createElement("b");return e.innerText=r.value,n.append(e,s),n.style.cursor="delete",n},N=r=>{if(!r)return[];let n=localStorage.getItem(r)||[];return Array.isArray(n)?n:JSON.parse(n)},W=(r,n)=>{localStorage.setItem(r,JSON.stringify(n))},M=()=>new Date().toISOString().split("T")[0],B=()=>N(M());class X extends A{constructor(s){super(s);T(this,"get",N);T(this,"latest",[]);this.latest=B()}add(s,e){if(s&&e){let t=N(s);t.push({value:e,timestamp:new Date().toLocaleTimeString("en-US")}),W(s,t),this.list(!0)}}addToday(s){this.add(M(),s)}list(s){const e=document.createElement("ul"),t=this.latest=B();return e.innerHTML="",t.forEach((o,c)=>{const u=Q(o),a=document.createElement("button");a.innerHTML="Delete",a.style.marginLeft="10px",a.onclick=()=>{t.splice(c,1),W(M(),t),this.list(!0)},u.appendChild(a),e.appendChild(u)}),e}render(){return[this.list]}}let fe="climb-history";customElements.define(fe,X);const Z="7",K=()=>localStorage.getItem("gradeRange")||Z,me=r=>localStorage.setItem("gradeRange",r);class ee extends A{constructor(n){super(n),me(K())}range(){let n=document.createElement("div");n.classList.add("slider");const s=document.createElement("small"),e=document.createElement("input");return e.type="range",e.min="0",e.max="17",e.oninput=()=>{s.innerHTML=e.value,localStorage.setItem("gradeRange",e.value)},e.onchange=()=>window.location.reload(),s.innerHTML=e.value=K(),n.append(e,s),n}clear(){const n=document.createElement("button");return n.innerText="Clear All History (MAKE SURE YOU WANT THIS)",n.onclick=()=>{localStorage.clear(),window.location.reload()},n}render(){return[this.clear,this.range]}}let pe="settings-page";customElements.define(pe,ee);var I;class te extends A{constructor(s){super(s);m(this,I,new X);T(this,"history",()=>i(this,I));T(this,"buttons",()=>{let s=localStorage.getItem("gradeRange")||Z;const e=document.createElement("div");e.classList.add("grades");const o=Array.from({length:parseInt(s)+1},(l,d)=>`V${d}`).map(l=>{const d=new _({grade:l});return d.classList.add("grade"),d}),c=new v;let u=!1;const a=this.history();return o.forEach(l=>{c.add(`${l.grade}Clicked`,()=>{const d=l.onClick();u&&a.addToday(d)})}),u=!0,e.append(...o),e});i(this,I).initialize()}score(){const s=document.createElement("h3");s.style.fontSize="100px",s.style.margin="0",s.style.marginBottom="20px",s.style.textAlign="center";const o=this.history().latest.map(c=>parseInt(c.value.slice(1))).reduce((c,u)=>c+u+1,0);return s.innerText=`${o}`,s}render(){return[this.score,this.buttons,this.history]}}I=new WeakMap;let ge="score-page";customElements.define(ge,te);class ne extends A{constructor(n){super(n)}list(){const n=Array.from({length:localStorage.length},(e,t)=>localStorage.key(t)).filter(e=>(e==null?void 0:e.split("-").length)===3).sort((e,t)=>new Date(t)-new Date(e)),s=document.createElement("div");return s.append(...n.map(e=>{const t=N(e),o=document.createElement("div"),c=document.createElement("h3");c.style.marginBottom="0px",c.innerText=e;const u=document.createElement("small"),a=t.reduce((d,h)=>d+parseInt(h.value.slice(1)),0)/t.length;u.innerText=`${t.length} climbs @ V${a.toFixed(1)}`;const l=document.createElement("ul");return t.forEach(d=>{const h=Q(d);l.append(h)}),o.append(c,u,l),o})),s}render(){return[this.list]}}let ye="history-page";customElements.define(ye,ne);const be=new te,Ee=new ee,Se=new ne,we=new Y({header:"JustClimb",pages:[{label:"Score",element:be},{label:"History",element:Se},{label:"Settings",element:Ee}]});document.body.append(we);
